import"../../modulepreload-polyfill-B5Qt9EMX.js";import{p as $}from"../../visual-BioANKiq.js";import{f as m,c as S}from"../../rx-Dsu-18JX.js";import{b,p as h}from"../../geometry-v_W7ixAL.js";import{a as V}from"../../dom-DCcQsJJW.js";import{r as d}from"../../ui-DXRN7ELC.js";import"../../src-BeVDUOoq-B6OoJ3p3.js";import"../../records-Cei7yF1D-Dejnhz0L.js";import"../../src-C7XtfIer-DYL4nwfS.js";import"../../src-sHR31-XU-C1xj0KeO.js";import"../../dist-DE4H3J9W-BscYlIcj.js";import"../../src-DtTSywET-tUv0MHeI.js";import"../../is-integer-BmMnD0ra-CbN5m7X_.js";window.location.hash.includes("hide-panel")&&(document.querySelector("#right").style.display="none");const T=document.querySelector("#snippet"),r=(t,o)=>{const n=document.querySelector(`#${t}-x`);n.value=o.x.toString();const e=document.querySelector(`#${t}-y`);e.value=o.y.toString()},s=m.object({x:0,y:0});s.onValue(t=>{r("a",t),a()});const l=m.object({x:1,y:1});l.onValue(t=>{r("b",t),a()});const c=m.object({x:1,y:0});c.onValue(t=>{r("handle1",t),a()});const i=$.insert({canvasResizeTo:"viewport",region:{match:"#target",marginPx:50}},{grid:{increments:.1},clear:"canvas",range:{min:{x:0,y:0},max:{x:1,y:1}},connectStyle:"line",valueStyle:"dot",textStyle:{size:"8px",colour:"gray"},axisStyle:{colour:"hsl(0,0%,20%)"},show:{grid:!1,axes:!0,axisValues:!0,whiskers:!0},whiskerLength:10});i.setMeta("default",{colour:"hsl(50,100%,50%)",lineWidth:10});d.windowResize(200).onValue(t=>{i.positionElementAt(s.last(),"#point-a","middle"),i.positionElementAt(l.last(),"#point-b","middle"),i.positionElementAt(c.last(),"#point-handle1","middle")});function u(t,o){V.draggable(`#point-${t}`,{progress:n=>{let e=i.pointToValue(n.viewport,"screen");return(t==="a"||t==="b")&&(e=h.clamp(e)),o.set(e),{viewport:i.valueToScreenSpace(e)}},abort:(n,e)=>{console.log(`abort: ${n} - ${e}`)},success:n=>{let e=i.pointToValue(n.viewport,"screen");(t==="a"||t==="b")&&(e=h.clamp(e)),o.set(e)}},{autoTranslate:!0,quickDrag:!0}),i.positionElementAt(o.last(),`#point-${t}`,"middle"),r(t,o.last()),_(t,o)}function a(){const t=i.dataSet;t.clear();const o=s.last(),n=l.last(),e=c.last(),x=b.quadratic(o,n,e),y=b.interpolator(x);let g=.03;for(let p=0;p<1;p+=g){const v=y(p);t.add(v)}t.add(y(1)),i.overlayLines=[{a:o,b:e,colour:"white",width:4},{a:n,b:e,colour:"white",width:4}];const w=[`const a = { x: ${o.x.toFixed(3)}, y: ${o.y.toFixed(3)} };`,`const b = { x: ${n.x.toFixed(3)}, y: ${n.y.toFixed(3)} };`,`const h = { x: ${e.x.toFixed(3)}, y: ${e.y.toFixed(3)} };`,"Beziers.cubic(a, b, h);"];T.innerHTML=w.join("<br>"),i.draw()}function _(t,o){S({x:d.domNumberInputValue(`#${t}-x`),y:d.domNumberInputValue(`#${t}-y`,{emitInitialValue:!0})}).onValue(e=>{o.set(e),a(),i.positionElementAt(o.last(),`#point-${t}`,"middle")})}u("a",s);u("b",l);u("handle1",c);a();
