import"../../modulepreload-polyfill-B5Qt9EMX.js";import{p as w}from"../../visual-BioANKiq.js";import{b,p as y}from"../../geometry-v_W7ixAL.js";import{a as $}from"../../dom-DCcQsJJW.js";import{f as p,c as V}from"../../rx-Dsu-18JX.js";import{r as i}from"../../ui-DXRN7ELC.js";import"../../src-BeVDUOoq-B6OoJ3p3.js";import"../../records-Cei7yF1D-Dejnhz0L.js";import"../../src-C7XtfIer-DYL4nwfS.js";import"../../src-sHR31-XU-C1xj0KeO.js";import"../../dist-DE4H3J9W-BscYlIcj.js";import"../../src-DtTSywET-tUv0MHeI.js";import"../../is-integer-BmMnD0ra-CbN5m7X_.js";window.location.hash.includes("hide-panel")&&(document.querySelector("#right").style.display="none");const q=document.querySelector("#snippet"),u=(t,e)=>{const n=document.querySelector(`#${t}-x`);n.value=e.x.toString();const o=document.querySelector(`#${t}-y`);o.value=e.y.toString()},s=p.object({x:0,y:0});s.onValue(t=>{u("a",t),a()});const l=p.object({x:1,y:1});l.onValue(t=>{u("b",t),a()});const m=p.number(0);m.onValue(t=>{const e=document.querySelector("#bend");e.value=t.toString(),a()});const r=w.insert({canvasResizeTo:"viewport",region:{match:"#target",marginPx:50}},{grid:{increments:.1},clear:"canvas",range:{min:{x:0,y:0},max:{x:1,y:1}},connectStyle:"line",valueStyle:"dot",textStyle:{size:"8px",colour:"gray"},axisStyle:{colour:"hsl(0,0%,20%)"},show:{grid:!1,axes:!0,axisValues:!0,whiskers:!0},whiskerLength:10});r.setMeta("default",{colour:"hsl(50,100%,50%)",lineWidth:10});i.browserResizeObservable(window.document.body).onValue(t=>{r.positionElementAt(s.last(),"#point-a","middle"),r.positionElementAt(l.last(),"#point-b","middle")});function g(t,e){$.draggable(`#point-${t}`,{progress:n=>{let o=r.pointToValue(n.viewport,"screen");return(t==="a"||t==="b")&&(o=y.clamp(o)),e.set(o),{viewport:r.valueToScreenSpace(o)}},abort:(n,o)=>{console.log(`abort: ${n} - ${o}`)},success:n=>{let o=r.pointToValue(n.viewport,"screen");(t==="a"||t==="b")&&(o=y.clamp(o)),e.set(o)}},{autoTranslate:!0,quickDrag:!0}),r.positionElementAt(e.last(),`#point-${t}`,"middle"),u(t,e.last()),T(t,e)}function a(){const t=r.dataSet;t.clear();const e=s.last(),n=l.last(),o=m.last(),x=b.quadraticSimple(e,n,o),d=b.interpolator(x);let S=.03;for(let c=0;c<1;c+=S){const h=d(c);t.add(h)}t.add(d(1));const v=[`const a = { x: ${e.x.toFixed(3)}, y: ${e.y.toFixed(3)} };`,`const b = { x: ${n.x.toFixed(3)}, y: ${n.y.toFixed(3)} };`,`Beziers.quadraticSimple(a, b, ${o});`];q.innerHTML=v.join("<br>"),r.draw()}function T(t,e){V({x:i.domNumberInputValue(`#${t}-x`),y:i.domNumberInputValue(`#${t}-y`,{emitInitialValue:!0})}).onValue(o=>{e.set(o),a(),r.positionElementAt(e.last(),`#point-${t}`,"middle")})}const _=i.domNumberInputValue("#bend",{when:"changing"});_.onValue(t=>{m.set(t),a()});g("a",s);g("b",l);a();
