import"../../modulepreload-polyfill-B5Qt9EMX.js";import{i as w,o as y,d as c}from"../../dom-source-CE_2PbT_.js";import{i as $,b as V,d as x,c as q,a as b}from"../../browser-resize-DniPczo4.js";import{q as T,i as z}from"../../index-C_lhlGLx.js";import"../../interval-type-CIaujdcR.js";import"../../result-aflA1LW7.js";import"../../numbers-SvRH5ijj.js";import"../../state-machine-ROMMoZIR.js";import"../../sleep-DwDBk_RX.js";import"../../error-message-BtgnhF27.js";import"../../async-Dr__bS9h.js";import"../../element-sizing-Bsx-rrC3.js";import"../../resolve-el-BUhvOf7L.js";import"../../guard-BPeP3-pA.js";import"../../guard-RzpFIjKH.js";import"../../conversion-CGf7QoDW.js";import"../../clamp-ClLuI7HB.js";import"../../subtract-BmiCoi7k.js";import"../../placeholder-DHFnYwCJ.js";import"../../timeout-BR7pLkQL.js";import"../../scale-KzsViUdl.js";import"../../round-CDFh2_Rm.js";import"../../maps-CLnHBw0l.js";import"../../interpolate-CjV-b_hr.js";import"../../length-BrmuG0lR.js";import"../../guard-DRLb5kU_.js";import"../../from-top-left-CR5-Vjbi.js";import"../../guard-DHhxSbUy.js";function A(t){let e=t;const n=w(),o=s=>{e=s,n.set(s)};return{dispose:n.dispose,isDisposed:n.isDisposed,last:()=>e,on:n.on,onValue:n.onValue,set:o}}window.location.hash.includes("hide-panel")&&(document.querySelector("#right").style.display="none");const E=document.querySelector("#snippet"),m=(t,e)=>{const n=document.querySelector(`#${t}-x`);n.value=e.x.toString();const o=document.querySelector(`#${t}-y`);o.value=e.y.toString()},r=y({x:0,y:0});r.onValue(t=>{m("a",t),a()});const l=y({x:1,y:1});l.onValue(t=>{m("b",t),a()});const u=A(0);u.onValue(t=>{const e=document.querySelector("#bend");e.value=t.toString(),a()});const i=$({canvasResizeTo:"viewport",region:{match:"#target",marginPx:50}},{grid:{increments:.1},clear:"canvas",range:{min:{x:0,y:0},max:{x:1,y:1}},connectStyle:"line",valueStyle:"dot",textStyle:{size:"8px",colour:"gray"},axisStyle:{colour:"hsl(0,0%,20%)"},show:{grid:!1,axes:!0,axisValues:!0,whiskers:!0},whiskerLength:10});i.setMeta("default",{colour:"hsl(50,100%,50%)",lineWidth:10});V(window.document.body).onValue(t=>{i.positionElementAt(r.last(),"#point-a","middle"),i.positionElementAt(l.last(),"#point-b","middle")});function g(t,e){x(`#point-${t}`,{progress:n=>{let o=i.pointToValue(n.viewport,"screen");return(t==="a"||t==="b")&&(o=b(o)),e.set(o),{viewport:i.valueToScreenSpace(o)}},abort:(n,o)=>{console.log(`abort: ${n} - ${o}`)},success:n=>{let o=i.pointToValue(n.viewport,"screen");(t==="a"||t==="b")&&(o=b(o)),e.set(o)}},{autoTranslate:!0,quickDrag:!0}),i.positionElementAt(e.last(),`#point-${t}`,"middle"),m(t,e.last()),k(t,e)}function a(){const t=i.dataSet;t.clear();const e=r.last(),n=l.last(),o=u.last(),s=T(e,n,o),d=z(s);let S=.03;for(let p=0;p<1;p+=S){const h=d(p);t.add(h)}t.add(d(1));const v=[`const a = { x: ${e.x.toFixed(3)}, y: ${e.y.toFixed(3)} };`,`const b = { x: ${n.x.toFixed(3)}, y: ${n.y.toFixed(3)} };`,`Beziers.quadraticSimple(a, b, ${o});`];E.innerHTML=v.join("<br>"),i.draw()}function k(t,e){q({x:c(`#${t}-x`),y:c(`#${t}-y`,{emitInitialValue:!0})}).onValue(o=>{e.set(o),a(),i.positionElementAt(e.last(),`#point-${t}`,"middle")})}const F=c("#bend",{when:"changing"});F.onValue(t=>{u.set(t),a()});g("a",r);g("b",l);a();
