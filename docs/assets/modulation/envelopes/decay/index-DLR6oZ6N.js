import"../../../modulepreload-polyfill-B5Qt9EMX.js";import{c as p}from"../../../state-machine-ROMMoZIR.js";import{A as f}from"../../../Adsr-DCNQi82e.js";import"../../../interval-type-CIaujdcR.js";import"../../../result-aflA1LW7.js";import"../../../numbers-SvRH5ijj.js";import"../../../simple-event-emitter-BaCTAiR9.js";import"../../../with-events-BRQckvzl.js";import"../../../index-C_lhlGLx.js";import"../../../interpolate-CjV-b_hr.js";import"../../../length-BrmuG0lR.js";import"../../../guard-DRLb5kU_.js";import"../../../guard-RzpFIjKH.js";import"../../../from-top-left-CR5-Vjbi.js";import"../../../guard-BPeP3-pA.js";import"../../../guard-DHhxSbUy.js";import"../../../scale-KzsViUdl.js";import"../../../clamp-ClLuI7HB.js";const c={env:new f({attackDuration:2e3,releaseDuration:5e3,sustainLevel:1,retrigger:window.location.hash.includes("retrigger")}),run:p(v)};console.log(`Retrigger: ${c.env.retrigger}`);let s={scaled:0,stage:"",raw:0,triggered:!1};function v(){const{env:e}=c,[r,t,n]=e.compute();return a({scaled:t,stage:r,raw:n}),h(),!Number.isNaN(t)}const w=e=>Math.floor(e*100)+"%",h=()=>{const{scaled:e,stage:r,raw:t,triggered:n}=s,u=Number.isNaN(e),i=o=>`hsl(60, ${o*100}%, 40%)`;console.log(`scaled: ${e.toPrecision(2)}	raw: ${t.toPrecision(2)}	stage: ${r}`);const g=document.querySelector("#without");if(g){g.style.backgroundColor=i(n?1:0);const o=document.querySelector("#trigState");o&&(o.textContent=n?"triggered":"")}const m=document.querySelector("#with");if(m){m.style.backgroundColor=i(u?0:e);const o=document.querySelector("#envStage");o&&(o.textContent=u?"":`${r} ${w(t)}`)}},d=e=>{const{env:r,run:t}=c;e.preventDefault(),!s.triggered&&(r.trigger(!0),a({triggered:!0}),t.start())},l=e=>{const{env:r,run:t}=c;e.preventDefault(),a({triggered:!1}),r.release(),t.start()};function y(){document.addEventListener("contextmenu",e=>e.preventDefault()),document.addEventListener("pointerdown",d),document.addEventListener("keydown",d),document.addEventListener("pointerup",l),document.addEventListener("keyup",l)}y();function a(e){s=Object.freeze({...s,...e})}
