import{r as o}from"./resolve-el-BUhvOf7L.js";import{i as u}from"./interval-type-CIaujdcR.js";import{g as a}from"./guard-BPeP3-pA.js";const d=s=>{if(typeof s!="object"||s===null)return{success:!1,error:"Value is null or not object type"};const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)?{success:!0,value:s}:{success:!1,error:"Fancy object"}},m=s=>{const t=typeof s;return t==="symbol"?{success:!1,error:"Symbol type"}:t==="function"?{success:!1,error:"Function type"}:t==="bigint"?{success:!0,value:s}:t==="number"?{success:!0,value:s}:t==="string"?{success:!0,value:s}:t==="boolean"?{success:!0,value:s}:d(s)},l=Object.freeze({width:0,height:0}),g=Object.freeze({x:0,y:0,width:0,height:0}),b=(s,...t)=>{const e=getComputedStyle(o(s)),i={};for(const r of t){const n=e[r];if(typeof n=="string")if(n.endsWith("px"))i[r]=Number.parseFloat(n.substring(0,n.length-2));else throw new Error(`Property '${String(r)}' does not end in 'px'. Value: ${n}`);else throw new Error(`Property '${String(r)}' is not type string. Got: ${typeof n} Value: ${n}`)}return i},f=(s,t)=>{let e;const i=u(t,100);return()=>{e&&clearTimeout(e),e=setTimeout(s,i)}};class c{#h;#s;#n;#i;#r;#c;#t;#o;#u=!1;#e;#a=()=>({});constructor(t,e){this.#t=o(t),this.#o=e.containerEl?o(e.containerEl):this.#t.parentElement,this.#h=e.stretch??"none",this.#c=e.onSizeChanging,this.#s=l;const i=e.onSizeDone;typeof i<"u"&&(this.#a=f(()=>{i(this.size,this.#t)},e.debounceTimeout));let r=e.naturalSize;r??=this.#t.getBoundingClientRect(),this.#i=1,this.#n=r,this.setNaturalSize(r),this.#r=g,this.#o===document.body?this.#b():this.#g()}dispose(t){this.#u||(this.#u=!0,this.#e&&(this.#e.disconnect(),this.#e=void 0))}static canvasParent(t,e){const i=o(t);return new c(i,{...e,onSizeChanging(n,h){h.width=n.width,h.height=n.height,e.onSizeChanging&&e.onSizeChanging(n,h)}})}static canvasViewport(t,e){const i=o(t);i.style.position="absolute",i.style.zIndex=(e.zIndex??0).toString(),i.style.left="0px",i.style.top="0px";const r={...e,containerEl:document.body};return this.canvasParent(t,r)}static svgViewport(t,e){return new c(t,{containerEl:document.body,stretch:"both",onSizeChanging(r){t.setAttribute("width",r.width.toString()),t.setAttribute("height",r.height.toString()),e&&e(r)}})}#g(){const t=this.#o;if(!t)throw new Error("No container element");const e=new ResizeObserver(r=>{this.#f(r)});e.observe(t);const i=this.#l(t.getBoundingClientRect());this.size=i,this.#e=e}#b(){const t=new ResizeObserver(e=>{this.#d()});t.observe(document.documentElement),this.#e=t,this.#d()}#d(){this.size={width:window.innerWidth,height:window.innerHeight},this.#r={x:0,y:0,...this.size}}setNaturalSize(t){this.#n=t,this.#i=t.width/t.height}get naturalSize(){return this.#n}get viewport(){return this.#r}#l(t){let{width:e,height:i}=t,r=this.#h;if(r==="min"?r=e<i?"width":"height":r==="max"&&(r=e>i?"width":"height"),r==="width"?i=e/this.#i:r==="height"&&(e=i*this.#i),this.#t instanceof HTMLElement){const n=b(this.#t,"borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth");e-=n.borderLeftWidth+n.borderRightWidth,i-=n.borderTopWidth+n.borderBottomWidth}return{width:e,height:i}}#f(t){const e=t[0].contentBoxSize[0],i={width:e.inlineSize,height:e.blockSize};this.size=this.#l(i),this.#r={x:0,y:0,width:i.width,height:i.height}}set size(t){a(t,"size"),this.#s=t,this.#c(t,this.#t),this.#a()}get size(){return this.#s}}export{c as E,g as a,l as b,m as t};
