import{a as ue,_ as A,B as O,C as pe,d as k}from"./src-BeVDUOoq-B6OoJ3p3.js";import{aY as he,aZ as me,a_ as ye,c as ge,a$ as _,b0 as be,bE as L,aT as we,aa as U,G as ve,z as xe,bF as j,g as J,b1 as Ee,b2 as Se,E as Ce}from"./src-C7XtfIer-DYL4nwfS.js";import{r as Y,u as $e}from"./dist-DE4H3J9W-BscYlIcj.js";const y=t=>{const e=K(t);if(e.success)return e.value;throw ue(e)},K=t=>{if(typeof t=="string"){const o=document.querySelector(t);if(o===null)return{success:!1,error:t.startsWith("#")?`Query '${t}' did not match anything. Try '#id', 'div', or '.class'`:`Query '${t}' did not match anything. Did you mean '#${t}?`};t=o}else{if(t===null)return{success:!1,error:"Param 'domQueryOrEl' is null, cannot resolve."};if(t===void 0)return{success:!1,error:"Param 'domQueryOrEl' is undefined"}}return{success:!0,value:t}},$=t=>t===void 0?[]:t===null?[]:Array.isArray(t)?t:typeof t=="string"?[...document.querySelectorAll(t)]:[t];var G={};A(G,{fromList:()=>Pe,fromObject:()=>ee});var X=O(Y());const Le=(t,e)=>e.leftPadding&&t.length<e.leftPadding?"&nbsp;".repeat(e.leftPadding-t.length)+t:t,Z=(t,e)=>{t=e.roundNumbers!==void 0?pe(e.roundNumbers,t):t;let o=e.precision!==void 0?t.toFixed(e.precision):t.toString();return o=Le(o.toString(),e),o},Te=(t,e)=>t===null?"(null)":t===void 0?"(undefined)":typeof t=="boolean"?t?"true":"false":typeof t=="string"?`"${t}"`:typeof t=="number"?Z(t,e.numbers):typeof t=="object"?Q(t,e):X.default.stringify(t),Q=(t,e)=>{let o='<div style="display:grid; grid-template-columns: repeat(2, 1fr)">';for(const n of Object.entries(t)){const r=Te(n[1],e);o+=`<div class="label" style="display:table-cell">${n[0]}</div>
      <div class="data" style="display:table-cell">${r}</div>`}return o+="</div>",o},Pe=(t,e)=>{const o=y(t);let n=document.createElement("DIV");o.append(n);const r={numbers:{},objectsAsTables:!0},s=()=>n?(n.remove(),n=void 0,!0):!1,l=c=>{const i=new Set;for(const[h,b]of c){const p=`table-${h}`;i.add(p);let d=o.querySelector(`#${p}`);if(d===null){if(d=document.createElement("table"),!d)throw new Error("Could not create table element");d.id=p,o.append(d)}N(d,b,r)}const a=Array.from(o.querySelectorAll("table"));for(const h of a)i.has(h.id)||h.remove()};return e&&l(e),{update:l,remove:s}},N=(t,e,o)=>{const n=o.numbers??{},r=o.idPrefix??"",s=o.objectsAsTables??!1;if(e===void 0){t.innerHTML="";return}const l=new Set;for(const[i,a]of Object.entries(e)){const h=`${r}-row-${i}`;l.add(h);let b=t.querySelector(`tr[data-key='${h}']`);if(b===null){b=document.createElement("tr"),t.append(b),b.setAttribute("data-key",h);const v=document.createElement("td");v.textContent=i,v.classList.add("label"),b.append(v)}let p=b.querySelector(`td[data-key='${h}-val']`);p===null&&(p=document.createElement("td"),p.classList.add("data"),p.setAttribute("data-key",`${h}-val`),b.append(p));let d;o.formatter&&(d=o.formatter(a,i)),d===void 0&&(typeof a=="object"?d=s?Q(a,o):X.default.stringify(a):typeof a=="number"?d=Z(a,n):typeof a=="boolean"?d=a?"true":"false":typeof a=="string"?d=`"${a}"`:d=JSON.stringify(a)),p.innerHTML=d}const c=Array.from(t.querySelectorAll("tr"));for(const i of c){const a=i.getAttribute("data-key");l.has(a)||i.remove()}},ee=(t,e,o={})=>{const n=y(t),r=o.idPrefix??Math.floor(Math.random()*1e3).toString(),s={numbers:{},objectsAsTables:!0,idPrefix:"",...o};let l=document.createElement("table");n.append(l);const c=()=>l?(l.remove(),l=void 0,!0):!1;return e&&N(l,e,s),{remove:c,update:a=>{if(!l)throw new Error("Table disposed");N(l,a,{...s,idPrefix:r})}}};var te={};A(te,{draggable:()=>ke});const ke=(t,e,o={})=>{const n=y(t);let r=_,s;const l=o.autoTranslate??!1,c=o.quickDrag??!1,i=o.fence?y(o.fence):void 0,a=o.fenceViewport;let h=Se;const b=window.getComputedStyle(n).position==="relative",p=()=>{n.classList.contains("drag-sel")&&n.classList.remove("drag-sel")},d=f=>{n.classList.contains("drag-sel")?n.classList.remove("drag-sel"):n.classList.add("drag-sel"),f.stopPropagation()};n.ownerDocument.addEventListener("click",p),n.addEventListener("click",d);const v=()=>{n.classList.remove("drag-progress"),n.ownerDocument.removeEventListener("pointermove",C),n.ownerDocument.removeEventListener("pointerup",z),n.ownerDocument.removeEventListener("pointercancel",P)},x=()=>{n.classList.contains("drag-progress")?P(void 0,"dispose"):v(),n.ownerDocument.removeEventListener("click",p),n.removeEventListener("click",d)},S=(f,u,g)=>(Ee(h)||(f={x:k(f.x,h.x,h.width),y:k(f.y,h.y,h.height)},a&&(u=k(u,a.x,a.x+a.width),g=k(g,a.y,a.y+a.height))),[f,{x:u,y:g}]);let T=Ce;const C=f=>{f.preventDefault(),f.stopPropagation();const{x:u,y:g}=f;let m=be(r)?{x:f.offsetX,y:f.offsetY}:{x:u-r.x,y:g-r.y};const w=S(m,u,g);m=w[0];const M={delta:m,initial:r,token:s,viewport:w[1]};if(typeof e.progress<"u"){const E=e.progress(M);if(E.abort){P(void 0,"discontinued");return}E.viewport&&(m={x:E.viewport.x-r.x,y:E.viewport.y-r.y})}if(T=m,l){const E=m.x,fe=m.y;n.style.translate=`${E}px ${fe}px`}},z=f=>{const u=n.getBoundingClientRect();v();const{x:g,y:m}=f,w=S(T,g,m),M={initial:r,token:s,delta:w[0],viewport:w[1]};if(l)if(n.style.translate="none",b){const E=n.parentElement?.getBoundingClientRect();n.style.left=`${u.x-E.left}px`,n.style.top=`${u.y-E.top}px`}else n.style.left=`${u.x}px`,n.style.top=`${u.y}px`;typeof e.success<"u"&&e.success(M)},P=(f,u="pointercancel")=>{v();let g=_;f&&"x"in f&&"y"in f&&(g={x:f.x,y:f.y});const m={token:s,initial:r,delta:{x:-1,y:-1},viewport:g};typeof e.abort<"u"&&e.abort(u,m)};return n.addEventListener("pointerdown",f=>{if(!n.classList.contains("drag-sel")&&!c)return;const g=f;r={x:g.x,y:g.y};const m=typeof e.start>"u"?{allow:!0,token:s}:e.start();if(m.allow){if(s=m.token,i){const w=i.getBoundingClientRect();h={x:w.x-r.x,y:w.y-r.y,width:w.x+w.width-r.x,height:w.y+w.height-r.y}}else a&&(h={x:a.x-r.x,y:a.y-r.y,width:a.width+a.x-r.x,height:a.height+a.y-r.y});n.classList.add("drag-progress"),n.ownerDocument.addEventListener("pointermove",C),n.ownerDocument.addEventListener("pointerup",z),n.ownerDocument.addEventListener("pointercancel",P)}}),x};var ne={};A(ne,{button:()=>oe,buttonCreate:()=>je,checkbox:()=>ze,numeric:()=>Me,select:()=>Ne,textAreaKeyboard:()=>Ae});const Ae=t=>{t.addEventListener("keydown",e=>{const o=t.value,n=t.selectionStart,r=t.selectionEnd;if(e.key==="Tab"&&e.shiftKey)return t.value.substring(n-2,n)==="  "&&(t.value=o.slice(0,Math.max(0,n-2))+o.slice(Math.max(0,r))),t.selectionStart=t.selectionEnd=n-2,e.preventDefault(),!1;if(e.key==="Tab")return t.value=o.slice(0,Math.max(0,n))+"  "+o.slice(Math.max(0,r)),t.selectionStart=t.selectionEnd=n+2,e.preventDefault(),!1})},ze=(t,e)=>{const o=y(t);return e&&o.addEventListener("change",()=>{e(o.checked)}),{get checked(){return o.checked},set checked(n){o.checked=n}}},Me=(t,e,o)=>{const n=y(t),r=o?"change":"input";return e&&n.addEventListener(r,()=>{e(Number.parseInt(n.value))}),{get value(){return Number.parseInt(n.value)},set value(s){n.value=s.toString()}}},oe=(t,e)=>{const o=y(t),n=()=>{e&&o.addEventListener("click",e)},r=()=>{e&&o.removeEventListener("click",e)};return n(),{get title(){return o.textContent},set title(s){o.textContent=s},dispose(s=!1){r(),s&&o.remove()},onClick(s){r(),e=s,n()},click(){e&&e()},set disabled(s){o.disabled=s},get el(){return o}}},je=(t,e)=>{const o=document.createElement("button"),n=oe(o,e);return n.title=t,n},Ne=(t,e,o={})=>{const n=y(t),{placeholderOpt:r,shouldAddChoosePlaceholder:s=!1,autoSelectAfterChoice:l=-1}=o,c=()=>{e!==void 0&&e(n.value),l>=0&&(n.selectedIndex=l)};return e&&n.addEventListener("change",i=>{c()}),{set disabled(i){n.disabled=i},get value(){return n.value},get index(){return n.selectedIndex},get isSelectedPlaceholder(){return(s||o.placeholderOpt!==void 0)&&n.selectedIndex===0},setOpts(i,a){n.options.length=0,s?i=["-- Choose --",...i]:r!==void 0&&(i=[r,...i]);let h=0;for(const[b,p]of i.entries()){const d=document.createElement("option");d.value=p,d.innerHTML=p,a!==void 0&&p===a&&(h=b),n.options.add(d)}n.selectedIndex=h},select(i=0,a=!1){n.selectedIndex=i,a&&e&&c()}}};function re(t){return typeof HTMLElement=="object"?t instanceof HTMLElement:t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"}const De=t=>t.map(e=>{let o;Array.isArray(e)&&(o=e[1],e=e[0]);const n=e.indexOf("-");if(n<0)throw new Error("Simple expression expects form of: 'elementid-attribute'");return{variable:e,attribute:e.slice(n+1),id:e.slice(0,n),defaultValue:o}}),Re=(t,...e)=>{const o=y(t),n=window.getComputedStyle(o);for(const r of e){const s=U(r.variable,"--");let l=n.getPropertyValue(`--${s}`);if(l===null||l.length===0){if(r.defaultValue===void 0)continue;l=r.defaultValue}let c,i;if("query"in r&&r.query!==void 0?c=r.query:"id"in r&&r.id!==void 0?c=`#${r.id}`:"object"in r&&r.object!==void 0&&(i=Array.isArray(r.object)?r.object:[r.object]),c===void 0){if(i===void 0)throw new Error("Missing 'query', 'id' or 'object' fields")}else i=[...o.querySelectorAll(c)];if(i!==null&&i!==void 0)if(r.attribute)for(const a of i)if(re(a))a.setAttribute(r.attribute,l);else throw new Error("Trying to set an attribute on something not a HTML element",{cause:a});else if(r.field)for(const a of i)if(typeof a=="object")a[r.field]=l;else throw new Error(`Trying to set field on something that is not an object (${typeof a})`,{cause:a});else throw new Error(`Neither 'attribute' or 'field' to set is defined in option (${JSON.stringify(r)})`)}};function Be(t,e){const o=getComputedStyle(e??document.body),r=Object.entries(t).map(s=>[s[0],se(o,s[0],s[1])]);return Object.fromEntries(r)}function Ve(t,e){t.startsWith("--")||(t=`--${t}`);const o=getComputedStyle(document.body).getPropertyValue(t).trim();return o.length===0?e:o}function We(t,e){const o=e===void 0?document.body.style:re(e)?e.style:e;for(const[n,r]of Object.entries(t)){let s=n.replaceAll("_","-");s.startsWith("--")||(s="--"+s),o.setProperty(s,r.toString())}}function se(t,e,o){e.startsWith("--")||(e="--"+e),e=e.replaceAll("_","-");const n=t.getPropertyValue(e);if(n.length===0)return o;if(typeof o=="number")return parseFloat(n);if(typeof o=="boolean"){if(n==="true")return!0;if(n==="false")return!1}return n}const Ie=t=>{let e=y(t);const o=e.getBoundingClientRect();e instanceof SVGElement&&(e=e.parentElement);const n=B(e,"borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth");return{x:o.x,y:o.y,width:o.width+n.borderLeftWidth+n.borderRightWidth,height:o.height+n.borderTopWidth+n.borderBottomWidth}},B=(t,...e)=>{const o=getComputedStyle(y(t)),n={};for(const r of e){const s=o[r];if(typeof s=="string")if(s.endsWith("px"))n[r]=Number.parseFloat(s.substring(0,s.length-2));else throw new Error(`Property '${String(r)}' does not end in 'px'. Value: ${s}`);else throw new Error(`Property '${String(r)}' is not type string. Got: ${typeof s} Value: ${s}`)}return n},V=(t,e,o)=>{const n=$(t);if(n.length!==0)for(const r of n)e?r.classList.add(o):r.classList.remove(o)},W=(t,e)=>{const o=$(t);if(o.length!==0)for(const n of o)n.classList.toggle(e)},I=(t,e)=>{const o=$(t);if(o.length!==0)for(const n of o)n.style.display=e};var qe=class{dataTable;constructor(t={}){const e=t.theme??"dark";if(document.querySelector("#ixfx-data-display")!==null)throw new Error("DataDisplay already loaded on this page");const n=document.createElement("div");n.id="ixfx-data-display",n.classList.add(`theme-${e}`);const r=document.createElement("style");r.textContent=`
    #ixfx-data-display {
      background: white;
      color: black;
      border: 2px solid hsl(0deg 0.61% 90%);
      border-radius: 4px;
      z-index: 1000;
      opacity: 40%;
      padding: 1em;
      font-family: monospace;
      position: fixed;
      right: 1em;
      top: 1em;
    }
    #ixfx-data-display.theme-dark {
      background: black;
      color: white;
      border: 2px solid hsl(0deg 0.61% 10%);
    }
    #ixfx-data-display:hover {
      opacity: 100%;
    }
    #ixfx-data-display table {
      border-collapse: collapse;
    }
    #ixfx-data-display tr:not(:last-child) {
      border-bottom: 2px solid hsl(0deg 0.61% 90%);
    }
    #ixfx-data-display.dark tr:not(:last-child) {
      border-bottom: 2px solid hsl(0deg 0.61% 10%);
    }
    #ixfx-data-display td {
      padding-bottom: 0.4em;
      padding-top: 0.4em;
    }
    #ixfx-data-display .label {
      color: hsl(0deg 0.61% 60%);
      text-align: right;
      padding-right: 0.5em;
    }
    #ixfx-data-display.theme-dark .label {
      color: gray;
    }
    `,n.style.display="inline-block",document.body.append(r),document.body.append(n),this.dataTable=ee(n,void 0,{objectsAsTables:!0,...t})}update(t){this.dataTable.update(t)}};function q(t,e){return H("textContent",t,e)}function F(t,e){return H("innerHTML",t,e)}function H(t,e,o){let n=[];const r=s=>{const l=typeof s,c=l==="string"||l==="number"||l==="boolean"?s:JSON.stringify(s);n.length===0&&(n=$(e));for(const i of n)i[t]=c;return c};return o===void 0?r:r(o)}const Fe=t=>{const e=$(t),o=q(e),n=F(e);return{text:o,html:n,cssDisplay:r=>{I(e,r)},cssClass:(r,s)=>{V(e,r,s)},cssToggle:r=>{W(e,r)},el:()=>e[0],els:()=>e}},He=t=>({text:e=>q(t,e),html:e=>F(t,e),cssDisplay:e=>{I(t,e)},cssClass:(e,o)=>{V(t,e,o)},cssToggle:e=>{W(t,e)},el:()=>y(t),els:()=>$(t)}),_e=(t,e)=>{let o;const n=ge(e,100);return()=>{o&&clearTimeout(o),o=setTimeout(t,n)}};var Oe=class D{#a;#s;#i;#o;#r;#l=(e,o)=>{};#e;#t;#c=!1;#n;#d=()=>({});constructor(e,o){this.#e=y(e);const n=o.containerEl;if(n===null||typeof n>"u"){const l=this.#e.parentElement;if(l!==null)this.#t=l;else{const c=this.#e.parentNode;c!==null&&(this.#t=c)}}else(typeof n=="string"||typeof n=="object")&&(this.#t=y(n));this.#a=o.stretch??"none",this.#l=o.onSizeChanging,this.#s=he;const r=o.onSizeDone;typeof r<"u"&&(this.#d=_e(()=>{r(this.size,this.#e)},o.debounceTimeout));let s=o.naturalSize;s??=this.#e.getBoundingClientRect(),this.#o=1,this.#i=s,this.setNaturalSize(s),this.#r=me,this.#t===document.body?this.#h():this.#p()}dispose(e){this.#c||(this.#c=!0,this.#n&&(this.#n.disconnect(),this.#n=void 0))}static canvasParent(e,o){const n=y(e);return new D(n,{...o,onSizeChanging(s,l){l.width=s.width,l.height=s.height,o.onSizeChanging&&o.onSizeChanging(s,l)}})}static canvasViewport(e,o){const n=y(e);n.style.position="absolute",n.style.zIndex=(o.zIndex??0).toString(),n.style.left="0px",n.style.top="0px";const r={...o,containerEl:document.body};return this.canvasParent(e,r)}static svgViewport(e,o){return new D(e,{containerEl:document.body,stretch:"both",onSizeChanging(r){e.setAttribute("width",r.width.toString()),e.setAttribute("height",r.height.toString()),o&&o(r)}})}#p(){const e=this.#t;if(!e)throw new Error("No container element");const o=new ResizeObserver(r=>{this.#m(r)});o.observe(e);const n=this.#u(e.getBoundingClientRect());this.size=n,this.#n=o}#h(){const e=new ResizeObserver(o=>{this.#f()});e.observe(document.documentElement),this.#n=e,this.#f()}#f(){this.size={width:window.innerWidth,height:window.innerHeight},this.#r={x:0,y:0,...this.size}}setNaturalSize(e){this.#i=e,this.#o=e.width/e.height}get naturalSize(){return this.#i}get viewport(){return this.#r}#u(e){let{width:o,height:n}=e,r=this.#a;if(r==="min"?r=o<n?"width":"height":r==="max"&&(r=o>n?"width":"height"),r==="width"?n=o/this.#o:r==="height"&&(o=n*this.#o),this.#e instanceof HTMLElement){const s=B(this.#e,"borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth");o-=s.borderLeftWidth+s.borderRightWidth,n-=s.borderTopWidth+s.borderBottomWidth}return{width:o,height:n}}#m(e){const o=e[0].contentBoxSize[0],n={width:o.inlineSize,height:o.blockSize};this.size=this.#u(n),this.#r={x:0,y:0,width:n.width,height:n.height}}set size(e){ye(e,"size"),this.#s=e,this.#l&&this.#l(e,this.#e),this.#d()}get size(){return this.#s}};const Ue=()=>{let t=!0;const e=document.createElement("div");e.style.color="black",e.style.border="2px solid red",e.style.backgroundColor="hsl(0, 80%, 90%)",e.style.padding="1em",e.style.display="none",e.style.top="1em",e.style.left="1em",e.style.position="absolute",e.style.fontFamily="monospace";const o=document.createElement("div");o.style.maxWidth="50vw",o.style.maxHeight="50vh",o.style.overflowY="scroll",e.innerHTML="<h1>Error</h1>",e.append(o);const n=i=>{i.style.padding="0.3em",i.style.marginTop="1em"},r=document.createElement("button");r.textContent="Close",r.addEventListener("click",()=>{c()});const s=document.createElement("button");s.textContent="Stop displaying errors",s.addEventListener("click",()=>{t=!1,c()}),n(r),n(s),e.append(r),e.append(s),document.body.append(e);const l=i=>{e.style.display="inline",o.innerHTML+=i.stack?`<pre>${i.stack}</pre>`:`<p>${J(i)}</p>`},c=()=>{e.style.display="none"};return window.onerror=(i,a,h,b,p)=>{t&&(p?(console.log(p),l(p)):(console.log(i),l(i)))},window.addEventListener("unhandledrejection",i=>{console.log(i.reason),t&&l(i.reason)}),{show:l,hide:c}},ie=(t,e)=>{const o=document.createElement("style");o.textContent=e;let n;return t.shadowRoot?(n=t.shadowRoot,n.innerHTML=""):n=t.attachShadow({mode:"open"}),n.append(o),n},le=(t,e={})=>{const{capacity:o=0,monospaced:n=!0,timestamp:r=!1,collapseDuplicates:s=!0,css:l=""}=e;let c=0,i,a=0;const h=y(t),p=ie(h,`
  .log {
    font-family: ${n?'Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", Monaco, "Courier New", Courier, monospace':"normal"};
    background-color: var(--code-background-color);
    padding: var(--padding1, 0.2em);
    overflow-y: auto;
    height:100%;
  }
  .timestamp {
    margin-right: 0.5em;
    opacity: 0.5;
    font-size: 70%;
    align-self: center;
  }
  .line {
    display: flex;
    padding-bottom: 0.1em;
    padding-top: 0.1em;
  }
  .line:hover {
  
  }
  .error {
    color: red;
  }
  .badge {
    border: 1px solid currentColor;
    align-self: center;
    font-size: 70%;
    padding-left: 0.2em;
    padding-right: 0.2em;
    border-radius: 1em;
    margin-left: 0.5em;
    margin-right: 0.5em;
  }
  .msg {
    flex: 1;
    word-break: break-word;
  }
  ${l}
  `),d=document.createElement("div");d.className="log",p.append(d);const v=f=>{const u=document.createElement("div");if(typeof f=="string")u.innerHTML=f;else if(f instanceof Error){const g=f.stack;u.innerHTML=g===void 0?f.toString():g.toString()}else u.innerHTML=f;u.classList.add("error"),C(u),i=void 0,a=0};let x=0;const S=(f="")=>{const u=T(f);return u&&(u.classList.add("warning"),u)},T=(f="")=>{let u;const g=window.performance.now()-x;if(!(e.minIntervalMs&&g<e.minIntervalMs))if(x=window.performance.now(),typeof f=="object"?u=JSON.stringify(f):f===void 0?u="(undefined)":f===null?u="(null)":typeof f=="number"?(Number.isNaN(u)&&(u="(NaN)"),u=f.toString()):u=f,u.length===0){const m=document.createElement("hr");i=void 0,C(m)}else if(u===i&&s){const m=d.firstElementChild;let w=m.querySelector(".badge");return w===null&&(w=document.createElement("div"),w.className="badge",m.insertAdjacentElement("beforeend",w)),m!==null&&(w.textContent=(++a).toString()),m}else{const m=document.createElement("div");return m.textContent=u,C(m),i=u,m}},C=f=>{if(r){const u=document.createElement("div"),g=document.createElement("div");g.className="timestamp",g.textContent=new Date().toLocaleTimeString(),u.append(g,f),f.classList.add("msg"),u.classList.add("line"),f=u}else f.classList.add("line","msg");if(e.reverse?d.append(f):d.insertBefore(f,d.firstChild),o>0&&++c>o*2)for(;c>o;)d.lastChild?.remove(),c--;e.reverse&&(d.scrollTop=d.scrollHeight),a=0};return{error:v,log:T,warn:S,append:C,clear:()=>{d.innerHTML="",i=void 0,a=0,c=0},dispose:()=>{d.remove()},get isEmpty(){return c===0}}},Je=(t={})=>{const e={log:console.log,error:console.error,warn:console.warn},o=t.witholdCss??!1,n=t.insertIntoEl;let r;n?r=y(n):(r=document.createElement("DIV"),r.id="ixfx-log",document.body.prepend(r)),o||(r.style.position="fixed",r.style.left="0px",r.style.top="0px",r.style.pointerEvents="none",r.style.display="none");const s=le(r,t),l=c=>{r.style.display="block"};console.error=(c,...i)=>{s.error(c),i.length>0&&s.error(i),e.error(c,...i),l()},console.warn=(c,...i)=>{s.warn(c),i.length>0&&s.warn(i),l()},console.log=(c,...i)=>{s.log(c),i.length>0&&s.log(i),e.log(c,...i),l()},window.onerror=(c,i,a,h,b)=>{const p=i===void 0?"":U(i,"/",{fromEnd:!0}),d=J(b);s.error(d+` (${p}:${a})`),l()},window.addEventListener("unhandledrejection",function(c){s.error(c.reason),l()})};async function*R(t,e={}){if(typeof t=="string")return R([t],e);if(typeof t=="object"&&"nodeName"in t)return R([t],e);const n=e??!1?$e():r=>!0;if(Array.isArray(t))for(const r of t)if(typeof r=="string")for(const s of document.querySelectorAll(r)){const l=s;n(l)&&(yield l)}else n(r)&&(yield r);else for await(const r of t)if(typeof r=="string")for(const s of document.querySelectorAll(r))n(s)&&(yield s);else n(r)&&(yield r)}const Ye=t=>{const e=t.panels,o=t.preselectId??e[0].id,n=`tabset-${we()}`,r=y(t.parent),s=`
  <div class="ixfx-tabset" id="${n}">
    <fieldset class="ixfx-tabset-controls">
    ${e.map(p=>{const d=`${n}-${p.id}-select`;return`<input type="radio" name="${n}-tabs" id="${d}" data-tabset="${p.id}"><label for="${d}">${p.label}</label>`}).join("")}
    </fieldset>
    <div class="ixfx-tabset-host" id="${n}-host"></div>
  </div>
  `;r.innerHTML=s;const l=document.getElementById(`${n}-host`),c=document.getElementById(n);c.querySelector("fieldset")?.addEventListener("change",p=>{const d=p.target;a(d.getAttribute("data-tabset"))});let i;const a=p=>{const d=e.find(x=>x.id===p),v=i;if(t.onPanelChanging){const x=t.onPanelChanging(v,d);if(typeof x=="boolean"&&!x)return}if(v&&v.dismount(),i=d,d){d.mount(l);const x=`#${n}-${p}-select`,S=c.querySelector(x);S?S.checked=!0:console.warn(`Could not find INPUT element for panel id: ${p} (${x})`)}t.onPanelChange&&t.onPanelChange(v,d)};a(o);let h=!1;return{select:a,panels:e,hostEl:l,tabSetEl:c,notify:(p,d)=>{i&&(i.notify?i.notify(p,d):h||(h=!0,console.warn(`TabbedPanel.notify dropping notification '${p}'. Panel implementation is missing 'notify' function`)))}}};var Ke=O(Y());const ae=(t="viewport")=>{switch(t){case"viewport":return(e,o)=>{const n=L(e,o);return Object.freeze({x:n.x/window.innerWidth,y:n.y/window.innerHeight})};case"screen":return(e,o)=>{const n=L(e,o);return Object.freeze({x:n.x/screen.width,y:n.y/screen.height})};case"document":return(e,o)=>{const n=L(e,o);return Object.freeze({x:n.x/document.body.scrollWidth,y:n.y/document.body.scrollHeight})};default:throw new Error(`Unknown 'reference' parameter: ${JSON.stringify(t)}`)}},ce=(t,e={})=>{const o=e.target??"viewport",n=e.relative??!1,r=e.anchor??"nw",s=y(t),l=de(o);if(n){const c=ae(o);return()=>c(l(j(s.getBoundingClientRect(),r)))}else return()=>l(j(s.getBoundingClientRect(),r))},Ge=(t,e="nw")=>{const o=y(t);return j(o.getBoundingClientRect(),e)},Xe=(t,e="viewport")=>ce(t,{relative:!0,target:e})(),de=(t="viewport")=>{switch(t){case"screen":return(e,o)=>{const n=L(e,o);return Object.freeze({x:n.x+window.screenX,y:n.y+window.screenY})};case"document":return(e,o)=>{const n=L(e,o);return Object.freeze({x:n.x+window.scrollX,y:n.y+window.scrollY})};case"viewport":return(e,o)=>{const n=L(e,o);return Object.freeze({x:n.x,y:n.y})};default:throw new Error(`Unexpected target coordinate space: ${t}. Expected: viewport, document or screen`)}},Ze=(t,e,o="window")=>{if(!t)throw new Error("domQueryOrEl is null or undefined");const n=y(t),r=ve(e,window.innerWidth,window.innerHeight),s=n.getBoundingClientRect(),l=xe(r,s.width/2,s.height/2);n.style.transform=`translate(${l.x}px, ${l.y}px)`},Qe=(t,e)=>{if(!(t===null||!t)){if(!Array.isArray(e))throw new TypeError("List should be an array of strings");for(let o=0;o<e.length;o++)if(t.classList.contains(e[o])){t.classList.remove(e[o]),o+1<e.length?t.classList.add(e[o+1]):t.classList.add(e[0]);return}t.classList.add(e[0])}},et=t=>{const e=y(t),n=window.getComputedStyle(e).transform;if(n==="none"||typeof n>"u")return{x:0,y:0,z:0};const r=n.includes("3d")?"3d":"2d",s=/matrix.*\((.+)\)/.exec(n)[1].split(", ");return r==="2d"?{x:Number.parseFloat(s[4]),y:Number.parseFloat(s[5]),z:0}:r==="3d"?{x:Number.parseFloat(s[12]),y:Number.parseFloat(s[13]),z:Number.parseFloat(s[14])}:{x:0,y:0,z:0}},tt=(t,e)=>{const o=document.createElement(e);return t.parentElement?.insertBefore(o,t.nextSibling),o},nt=(t,e)=>{const o=document.createElement(e);return t.append(o),o},ot=t=>{let e=t.lastElementChild;for(;e;)e.remove(),e=t.lastElementChild},rt=t=>new Promise((o,n)=>{const r=Ke.default.stringify(t);navigator.clipboard.writeText(JSON.stringify(r)).then(()=>{o(!0)},s=>{console.warn("Could not copy to clipboard"),console.log(r),n(new Error(s))})}),st=(t,e)=>{const o=e.getAttribute("data-sort")??"";let n,r;for(const s of t.children){const l=s.getAttribute("data-sort")??"";if(o>=l&&(n=s),o<=l&&(r=s),n!==void 0&&r!==void 0)break}n!==void 0?n.insertAdjacentElement("afterend",e):r===void 0?t.append(e):r.insertAdjacentElement("beforebegin",e)},it=(t,e,o)=>{if(typeof t>"u")throw new Error("Param 'parentEl' is undefined");if(t===null)throw new Error("Param 'parentEl' is null");const n=new Set;for(const[s,l]of e){const c=`c-${s}`,i=t.querySelector(`#${c}`),a=o(l,i);i!==a&&(a.id=c,t.append(a)),n.add(c)}const r=[];for(const s of t.children)n.has(s.id)||r.push(s);for(const s of r)s.remove()},lt=t=>{const e=document.getElementById(t);if(e===null)throw new Error(`HTML element with id '${t}' not found`);return e};var at={};A(at,{DataDisplay:()=>qe,DataTable:()=>G,DragDrop:()=>te,ElementSizer:()=>Oe,Forms:()=>ne,addShadowCss:()=>ie,byId:()=>lt,cardinalPosition:()=>Ge,clear:()=>ot,copyToClipboard:()=>rt,createAfter:()=>tt,createIn:()=>nt,cycleCssClass:()=>Qe,defaultErrorHandler:()=>Ue,el:()=>Fe,elRequery:()=>He,getBoundingClientRectWithBorder:()=>Ie,getComputedPixels:()=>B,getCssVariable:()=>Ve,getCssVariablesFromStyles:()=>se,getCssVariablesWithFallback:()=>Be,getTranslation:()=>et,inlineConsole:()=>Je,insertSorted:()=>st,log:()=>le,parseCssVariablesAsAttributes:()=>De,pointScaler:()=>ae,positionFn:()=>ce,positionFromMiddle:()=>Ze,positionRelative:()=>Xe,query:()=>R,reconcileChildren:()=>it,resolveEl:()=>y,resolveElementTry:()=>K,resolveEls:()=>$,setCssClass:()=>V,setCssDisplay:()=>I,setCssToggle:()=>W,setCssVariables:()=>We,setFromCssVariables:()=>Re,setHtml:()=>F,setProperty:()=>H,setText:()=>q,tabSet:()=>Ye,viewportToSpace:()=>de});export{Oe as E,K as a,y as r,H as s};
