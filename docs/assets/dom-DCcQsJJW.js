import{a as _,_ as A,B as D,C as q,d as C}from"./src-BeVDUOoq-B6OoJ3p3.js";import{aY as F,aZ as H,a_ as K,aT as O,c as Y,a$ as N,b0 as G,b1 as J,b2 as U,E as X}from"./src-C7XtfIer-DYL4nwfS.js";import{r as I}from"./dist-DE4H3J9W-BscYlIcj.js";const v=s=>{const t=Z(s);if(t.success)return t.value;throw _(t)},Z=s=>{if(typeof s=="string"){const n=document.querySelector(s);if(n===null)return{success:!1,error:s.startsWith("#")?`Query '${s}' did not match anything. Try '#id', 'div', or '.class'`:`Query '${s}' did not match anything. Did you mean '#${s}?`};s=n}else{if(s===null)return{success:!1,error:"Param 'domQueryOrEl' is null, cannot resolve."};if(s===void 0)return{success:!1,error:"Param 'domQueryOrEl' is undefined"}}return{success:!0,value:s}};var Q={};A(Q,{fromList:()=>ne,fromObject:()=>se});var R=D(I());const ee=(s,t)=>t.leftPadding&&s.length<t.leftPadding?"&nbsp;".repeat(t.leftPadding-s.length)+s:s,j=(s,t)=>{s=t.roundNumbers!==void 0?q(t.roundNumbers,s):s;let n=t.precision!==void 0?s.toFixed(t.precision):s.toString();return n=ee(n.toString(),t),n},te=(s,t)=>s===null?"(null)":s===void 0?"(undefined)":typeof s=="boolean"?s?"true":"false":typeof s=="string"?`"${s}"`:typeof s=="number"?j(s,t.numbers):typeof s=="object"?B(s,t):R.default.stringify(s),B=(s,t)=>{let n='<div style="display:grid; grid-template-columns: repeat(2, 1fr)">';for(const e of Object.entries(s)){const i=te(e[1],t);n+=`<div class="label" style="display:table-cell">${e[0]}</div>
      <div class="data" style="display:table-cell">${i}</div>`}return n+="</div>",n},ne=(s,t)=>{const n=v(s);let e=document.createElement("DIV");n.append(e);const i={numbers:{},objectsAsTables:!0},r=()=>e?(e.remove(),e=void 0,!0):!1,f=h=>{const d=new Set;for(const[m,b]of h){const u=`table-${m}`;d.add(u);let a=n.querySelector(`#${u}`);if(a===null){if(a=document.createElement("table"),!a)throw new Error("Could not create table element");a.id=u,n.append(a)}z(a,b,i)}const o=Array.from(n.querySelectorAll("table"));for(const m of o)d.has(m.id)||m.remove()};return t&&f(t),{update:f,remove:r}},z=(s,t,n)=>{const e=n.numbers??{},i=n.idPrefix??"",r=n.objectsAsTables??!1;if(t===void 0){s.innerHTML="";return}const f=new Set;for(const[d,o]of Object.entries(t)){const m=`${i}-row-${d}`;f.add(m);let b=s.querySelector(`tr[data-key='${m}']`);if(b===null){b=document.createElement("tr"),s.append(b),b.setAttribute("data-key",m);const w=document.createElement("td");w.textContent=d,w.classList.add("label"),b.append(w)}let u=b.querySelector(`td[data-key='${m}-val']`);u===null&&(u=document.createElement("td"),u.classList.add("data"),u.setAttribute("data-key",`${m}-val`),b.append(u));let a;n.formatter&&(a=n.formatter(o,d)),a===void 0&&(typeof o=="object"?a=r?B(o,n):R.default.stringify(o):typeof o=="number"?a=j(o,e):typeof o=="boolean"?a=o?"true":"false":typeof o=="string"?a=`"${o}"`:a=JSON.stringify(o)),u.innerHTML=a}const h=Array.from(s.querySelectorAll("tr"));for(const d of h){const o=d.getAttribute("data-key");f.has(o)||d.remove()}},se=(s,t,n={})=>{const e=v(s),i=n.idPrefix??Math.floor(Math.random()*1e3).toString(),r={numbers:{},objectsAsTables:!0,idPrefix:"",...n};let f=document.createElement("table");e.append(f);const h=()=>f?(f.remove(),f=void 0,!0):!1;return t&&z(f,t,r),{remove:h,update:o=>{if(!f)throw new Error("Table disposed");z(f,o,{...r,idPrefix:i})}}};var ie={};A(ie,{draggable:()=>re});const re=(s,t,n={})=>{const e=v(s);let i=N,r;const f=n.autoTranslate??!1,h=n.quickDrag??!1,d=n.fence?v(n.fence):void 0,o=n.fenceViewport;let m=U;const b=window.getComputedStyle(e).position==="relative",u=()=>{e.classList.contains("drag-sel")&&e.classList.remove("drag-sel")},a=l=>{e.classList.contains("drag-sel")?e.classList.remove("drag-sel"):e.classList.add("drag-sel"),l.stopPropagation()};e.ownerDocument.addEventListener("click",u),e.addEventListener("click",a);const w=()=>{e.classList.remove("drag-progress"),e.ownerDocument.removeEventListener("pointermove",$),e.ownerDocument.removeEventListener("pointerup",k),e.ownerDocument.removeEventListener("pointercancel",P)},x=()=>{e.classList.contains("drag-progress")?P(void 0,"dispose"):w(),e.ownerDocument.removeEventListener("click",u),e.removeEventListener("click",a)},E=(l,c,g)=>(J(m)||(l={x:C(l.x,m.x,m.width),y:C(l.y,m.y,m.height)},o&&(c=C(c,o.x,o.x+o.width),g=C(g,o.y,o.y+o.height))),[l,{x:c,y:g}]);let L=X;const $=l=>{l.preventDefault(),l.stopPropagation();const{x:c,y:g}=l;let p=G(i)?{x:l.offsetX,y:l.offsetY}:{x:c-i.x,y:g-i.y};const y=E(p,c,g);p=y[0];const T={delta:p,initial:i,token:r,viewport:y[1]};if(typeof t.progress<"u"){const S=t.progress(T);if(S.abort){P(void 0,"discontinued");return}S.viewport&&(p={x:S.viewport.x-i.x,y:S.viewport.y-i.y})}if(L=p,f){const S=p.x,W=p.y;e.style.translate=`${S}px ${W}px`}},k=l=>{const c=e.getBoundingClientRect();w();const{x:g,y:p}=l,y=E(L,g,p),T={initial:i,token:r,delta:y[0],viewport:y[1]};if(f)if(e.style.translate="none",b){const S=e.parentElement?.getBoundingClientRect();e.style.left=`${c.x-S.left}px`,e.style.top=`${c.y-S.top}px`}else e.style.left=`${c.x}px`,e.style.top=`${c.y}px`;typeof t.success<"u"&&t.success(T)},P=(l,c="pointercancel")=>{w();let g=N;l&&"x"in l&&"y"in l&&(g={x:l.x,y:l.y});const p={token:r,initial:i,delta:{x:-1,y:-1},viewport:g};typeof t.abort<"u"&&t.abort(c,p)};return e.addEventListener("pointerdown",l=>{if(!e.classList.contains("drag-sel")&&!h)return;const g=l;i={x:g.x,y:g.y};const p=typeof t.start>"u"?{allow:!0,token:r}:t.start();if(p.allow){if(r=p.token,d){const y=d.getBoundingClientRect();m={x:y.x-i.x,y:y.y-i.y,width:y.x+y.width-i.x,height:y.y+y.height-i.y}}else o&&(m={x:o.x-i.x,y:o.y-i.y,width:o.width+o.x-i.x,height:o.height+o.y-i.y});e.classList.add("drag-progress"),e.ownerDocument.addEventListener("pointermove",$),e.ownerDocument.addEventListener("pointerup",k),e.ownerDocument.addEventListener("pointercancel",P)}}),x};var oe={};A(oe,{button:()=>V,buttonCreate:()=>de,checkbox:()=>le,numeric:()=>ce,select:()=>fe,textAreaKeyboard:()=>ae});const ae=s=>{s.addEventListener("keydown",t=>{const n=s.value,e=s.selectionStart,i=s.selectionEnd;if(t.key==="Tab"&&t.shiftKey)return s.value.substring(e-2,e)==="  "&&(s.value=n.slice(0,Math.max(0,e-2))+n.slice(Math.max(0,i))),s.selectionStart=s.selectionEnd=e-2,t.preventDefault(),!1;if(t.key==="Tab")return s.value=n.slice(0,Math.max(0,e))+"  "+n.slice(Math.max(0,i)),s.selectionStart=s.selectionEnd=e+2,t.preventDefault(),!1})},le=(s,t)=>{const n=v(s);return t&&n.addEventListener("change",()=>{t(n.checked)}),{get checked(){return n.checked},set checked(e){n.checked=e}}},ce=(s,t,n)=>{const e=v(s),i=n?"change":"input";return t&&e.addEventListener(i,()=>{t(Number.parseInt(e.value))}),{get value(){return Number.parseInt(e.value)},set value(r){e.value=r.toString()}}},V=(s,t)=>{const n=v(s),e=()=>{t&&n.addEventListener("click",t)},i=()=>{t&&n.removeEventListener("click",t)};return e(),{get title(){return n.textContent},set title(r){n.textContent=r},dispose(r=!1){i(),r&&n.remove()},onClick(r){i(),t=r,e()},click(){t&&t()},set disabled(r){n.disabled=r},get el(){return n}}},de=(s,t)=>{const n=document.createElement("button"),e=V(n,t);return e.title=s,e},fe=(s,t,n={})=>{const e=v(s),{placeholderOpt:i,shouldAddChoosePlaceholder:r=!1,autoSelectAfterChoice:f=-1}=n,h=()=>{t!==void 0&&t(e.value),f>=0&&(e.selectedIndex=f)};return t&&e.addEventListener("change",d=>{h()}),{set disabled(d){e.disabled=d},get value(){return e.value},get index(){return e.selectedIndex},get isSelectedPlaceholder(){return(r||n.placeholderOpt!==void 0)&&e.selectedIndex===0},setOpts(d,o){e.options.length=0,r?d=["-- Choose --",...d]:i!==void 0&&(d=[i,...d]);let m=0;for(const[b,u]of d.entries()){const a=document.createElement("option");a.value=u,a.innerHTML=u,o!==void 0&&u===o&&(m=b),e.options.add(a)}e.selectedIndex=m},select(d=0,o=!1){e.selectedIndex=d,o&&t&&h()}}};function ve(s,t){const n=getComputedStyle(document.body),i=Object.entries(s).map(r=>[r[0],ue(n,r[0],r[1])]);return Object.fromEntries(i)}function ue(s,t,n){t.startsWith("--")||(t="--"+t),t=t.replaceAll("_","-");const e=s.getPropertyValue(t);if(e.length===0)return n;if(typeof n=="number")return parseFloat(e);if(typeof n=="boolean"){if(e==="true")return!0;if(e==="false")return!1}return e}const he=(s,...t)=>{const n=getComputedStyle(v(s)),e={};for(const i of t){const r=n[i];if(typeof r=="string")if(r.endsWith("px"))e[i]=Number.parseFloat(r.substring(0,r.length-2));else throw new Error(`Property '${String(i)}' does not end in 'px'. Value: ${r}`);else throw new Error(`Property '${String(i)}' is not type string. Got: ${typeof r} Value: ${r}`)}return e},me=(s,t)=>{let n;const e=Y(t,100);return()=>{n&&clearTimeout(n),n=setTimeout(s,e)}};var we=class M{#l;#r;#o;#s;#i;#a=(t,n)=>{};#e;#t;#c=!1;#n;#d=()=>({});constructor(t,n){this.#e=v(t);const e=n.containerEl;if(e===null||typeof e>"u"){const f=this.#e.parentElement;if(f!==null)this.#t=f;else{const h=this.#e.parentNode;h!==null&&(this.#t=h)}}else(typeof e=="string"||typeof e=="object")&&(this.#t=v(e));this.#l=n.stretch??"none",this.#a=n.onSizeChanging,this.#r=F;const i=n.onSizeDone;typeof i<"u"&&(this.#d=me(()=>{i(this.size,this.#e)},n.debounceTimeout));let r=n.naturalSize;r??=this.#e.getBoundingClientRect(),this.#s=1,this.#o=r,this.setNaturalSize(r),this.#i=H,this.#t===document.body?this.#m():this.#h()}dispose(t){this.#c||(this.#c=!0,this.#n&&(this.#n.disconnect(),this.#n=void 0))}static canvasParent(t,n){const e=v(t);return new M(e,{...n,onSizeChanging(r,f){f.width=r.width,f.height=r.height,n.onSizeChanging&&n.onSizeChanging(r,f)}})}static canvasViewport(t,n){const e=v(t);e.style.position="absolute",e.style.zIndex=(n.zIndex??0).toString(),e.style.left="0px",e.style.top="0px";const i={...n,containerEl:document.body};return this.canvasParent(t,i)}static svgViewport(t,n){return new M(t,{containerEl:document.body,stretch:"both",onSizeChanging(i){t.setAttribute("width",i.width.toString()),t.setAttribute("height",i.height.toString()),n&&n(i)}})}#h(){const t=this.#t;if(!t)throw new Error("No container element");const n=new ResizeObserver(i=>{this.#p(i)});n.observe(t);const e=this.#u(t.getBoundingClientRect());this.size=e,this.#n=n}#m(){const t=new ResizeObserver(n=>{this.#f()});t.observe(document.documentElement),this.#n=t,this.#f()}#f(){this.size={width:window.innerWidth,height:window.innerHeight},this.#i={x:0,y:0,...this.size}}setNaturalSize(t){this.#o=t,this.#s=t.width/t.height}get naturalSize(){return this.#o}get viewport(){return this.#i}#u(t){let{width:n,height:e}=t,i=this.#l;if(i==="min"?i=n<e?"width":"height":i==="max"&&(i=n>e?"width":"height"),i==="width"?e=n/this.#s:i==="height"&&(n=e*this.#s),this.#e instanceof HTMLElement){const r=he(this.#e,"borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth");n-=r.borderLeftWidth+r.borderRightWidth,e-=r.borderTopWidth+r.borderBottomWidth}return{width:n,height:e}}#p(t){const n=t[0].contentBoxSize[0],e={width:n.inlineSize,height:n.blockSize};this.size=this.#u(e),this.#i={x:0,y:0,width:e.width,height:e.height}}set size(t){K(t,"size"),this.#r=t,this.#a&&this.#a(t,this.#e),this.#d()}get size(){return this.#r}};const pe=(s,t)=>{const n=document.createElement("style");n.textContent=t;let e;return s.shadowRoot?(e=s.shadowRoot,e.innerHTML=""):e=s.attachShadow({mode:"open"}),e.append(n),e},xe=(s,t={})=>{const{capacity:n=0,monospaced:e=!0,timestamp:i=!1,collapseDuplicates:r=!0,css:f=""}=t;let h=0,d,o=0;const m=v(s),u=pe(m,`
  .log {
    font-family: ${e?'Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", Monaco, "Courier New", Courier, monospace':"normal"};
    background-color: var(--code-background-color);
    padding: var(--padding1, 0.2em);
    overflow-y: auto;
    height:100%;
  }
  .timestamp {
    margin-right: 0.5em;
    opacity: 0.5;
    font-size: 70%;
    align-self: center;
  }
  .line {
    display: flex;
    padding-bottom: 0.1em;
    padding-top: 0.1em;
  }
  .line:hover {
  
  }
  .error {
    color: red;
  }
  .badge {
    border: 1px solid currentColor;
    align-self: center;
    font-size: 70%;
    padding-left: 0.2em;
    padding-right: 0.2em;
    border-radius: 1em;
    margin-left: 0.5em;
    margin-right: 0.5em;
  }
  .msg {
    flex: 1;
    word-break: break-word;
  }
  ${f}
  `),a=document.createElement("div");a.className="log",u.append(a);const w=l=>{const c=document.createElement("div");if(typeof l=="string")c.innerHTML=l;else if(l instanceof Error){const g=l.stack;c.innerHTML=g===void 0?l.toString():g.toString()}else c.innerHTML=l;c.classList.add("error"),$(c),d=void 0,o=0};let x=0;const E=(l="")=>{const c=L(l);return c&&(c.classList.add("warning"),c)},L=(l="")=>{let c;const g=window.performance.now()-x;if(!(t.minIntervalMs&&g<t.minIntervalMs))if(x=window.performance.now(),typeof l=="object"?c=JSON.stringify(l):l===void 0?c="(undefined)":l===null?c="(null)":typeof l=="number"?(Number.isNaN(c)&&(c="(NaN)"),c=l.toString()):c=l,c.length===0){const p=document.createElement("hr");d=void 0,$(p)}else if(c===d&&r){const p=a.firstElementChild;let y=p.querySelector(".badge");return y===null&&(y=document.createElement("div"),y.className="badge",p.insertAdjacentElement("beforeend",y)),p!==null&&(y.textContent=(++o).toString()),p}else{const p=document.createElement("div");return p.textContent=c,$(p),d=c,p}},$=l=>{if(i){const c=document.createElement("div"),g=document.createElement("div");g.className="timestamp",g.textContent=new Date().toLocaleTimeString(),c.append(g,l),l.classList.add("msg"),c.classList.add("line"),l=c}else l.classList.add("line","msg");if(t.reverse?a.append(l):a.insertBefore(l,a.firstChild),n>0&&++h>n*2)for(;h>n;)a.lastChild?.remove(),h--;t.reverse&&(a.scrollTop=a.scrollHeight),o=0};return{error:w,log:L,warn:E,append:$,clear:()=>{a.innerHTML="",d=void 0,o=0,h=0},dispose:()=>{a.remove()},get isEmpty(){return h===0}}},Se=s=>{const t=s.panels,n=s.preselectId??t[0].id,e=`tabset-${O()}`,i=v(s.parent),r=`
  <div class="ixfx-tabset" id="${e}">
    <fieldset class="ixfx-tabset-controls">
    ${t.map(u=>{const a=`${e}-${u.id}-select`;return`<input type="radio" name="${e}-tabs" id="${a}" data-tabset="${u.id}"><label for="${a}">${u.label}</label>`}).join("")}
    </fieldset>
    <div class="ixfx-tabset-host" id="${e}-host"></div>
  </div>
  `;i.innerHTML=r;const f=document.getElementById(`${e}-host`),h=document.getElementById(e);h.querySelector("fieldset")?.addEventListener("change",u=>{const a=u.target;o(a.getAttribute("data-tabset"))});let d;const o=u=>{const a=t.find(x=>x.id===u),w=d;if(s.onPanelChanging){const x=s.onPanelChanging(w,a);if(typeof x=="boolean"&&!x)return}if(w&&w.dismount(),d=a,a){a.mount(f);const x=`#${e}-${u}-select`,E=h.querySelector(x);E?E.checked=!0:console.warn(`Could not find INPUT element for panel id: ${u} (${x})`)}s.onPanelChange&&s.onPanelChange(w,a)};o(n);let m=!1;return{select:o,panels:t,hostEl:f,tabSetEl:h,notify:(u,a)=>{d&&(d.notify?d.notify(u,a):m||(m=!0,console.warn(`TabbedPanel.notify dropping notification '${u}'. Panel implementation is missing 'notify' function`)))}}};D(I());const Ee=(s,t,n)=>{if(typeof s>"u")throw new Error("Param 'parentEl' is undefined");if(s===null)throw new Error("Param 'parentEl' is null");const e=new Set;for(const[r,f]of t){const h=`c-${r}`,d=s.querySelector(`#${h}`),o=n(f,d);d!==o&&(o.id=h,s.append(o)),e.add(h)}const i=[];for(const r of s.children)e.has(r.id)||i.push(r);for(const r of i)r.remove()};export{we as E,ie as a,Q as d,oe as f,ve as g,xe as l,Ee as r,Se as t};
