import{c as p,n as v,_ as y,l as pe,k as me,o as ve,d as ge,s as M,q as P}from"./src-2eX6lIN8-VI_Nykma.js";import{U as I,V as ye,W as we,X as w,Y as be,Z as C,_ as X,$ as u,a0 as g,a1 as h,a2 as B,a3 as _,a4 as T,a5 as Ee,a6 as G,a7 as ke,a8 as U,a9 as Ae,aa as Ie,ab as Le,c as W,ac as D,ad as Me,ae as Ne,af as Oe,ag as Y,ah as Z,ai as H,aj as Pe,ak as Te,al as $e,S as De,G as Fe,am as F,an as S,ao as Se}from"./src-CURfSkGx-Bgs9tt00.js";function Be(e,t={}){p(ge(e,"aboveZero","totalTicks"));const n=t.exclusiveStart??!1,s=t.exclusiveEnd??!1,r=t.cycleLimit??Number.MAX_SAFE_INTEGER,a=n?1:0,i=s?e-1:e;let o=0,c=t.startAt??a;if(t.startAtRelative){let l=e;n&&l--,s&&l--,c=Math.round(t.startAtRelative*l)}return l=>{if(l&&(l.resetAt!==void 0&&(c=l.resetAt),l.resetAtRelative!==void 0&&(c=Math.floor(l.resetAtRelative*e))),o>=r)return 1;const m=c/e;return c++,c>i&&(o++,c=a),m}}function R(e,t={}){const n=t.cycleLimit??Number.MAX_SAFE_INTEGER,s=1;let r=t.startAt??performance.now(),a=0;const i=W(e,1e3);return t.startAtRelative&&(p(v(t.startAtRelative,"percentage","startAtRelative")),r=performance.now()-i*t.startAtRelative),o=>{if(o&&(o.resetAt!==void 0&&(r=o.resetAt,r===0&&(r=performance.now())),o.resetAtRelative!==void 0&&(p(v(o.resetAtRelative,"percentage","resetAtRelative")),r=performance.now()-i*o.resetAtRelative)),a>=n)return s;const c=performance.now(),l=c-r;return l>=i&&(a+=Math.floor(l/i),r=c,a>=n)?s:l%i/i}}function _e(e,t={}){const n=6e4/e;return R(n,t)}function Re(e,t={}){const n=1e3/e;return R(n,t)}const J=(e,t={})=>{const n=e/1e3;let s=t.min??Number.MIN_SAFE_INTEGER,r=t.max??Number.MAX_SAFE_INTEGER;const a=t.clamp??!1;if(a&&t.max)throw new Error("Use either 'max' or 'clamp', not both.");a&&(r=e);let i=performance.now();return()=>{const o=performance.now(),c=o-i;i=o;const l=n*c;return l>r?r:l<s?s:l}},Ve=(e,t={})=>J(e/60,t);var ze={};y(ze,{bpm:()=>_e,elapsed:()=>R,hertz:()=>Re,perMinute:()=>Ve,perSecond:()=>J,ticks:()=>Be});var je={};y(je,{saw:()=>Ge,sine:()=>qe,sineBipolar:()=>Ce,square:()=>Ue,triangle:()=>Xe});const K=Math.PI*2;function*qe(e){if(e===void 0)throw new TypeError("Parameter 'timerOrFreq' is undefined");for(typeof e=="number"&&(e=I(e));;)yield(Math.sin(e.elapsed*K)+1)/2}function*Ce(e){if(e===void 0)throw new TypeError("Parameter 'timerOrFreq' is undefined");for(typeof e=="number"&&(e=I(e));;)yield Math.sin(e.elapsed*K)}function*Xe(e){for(typeof e=="number"&&(e=I(e));;){let t=e.elapsed;t<.5?t*=2:t=2-t*2,yield t}}function*Ge(e){if(e===void 0)throw new TypeError("Parameter 'timerOrFreq' is undefined");for(typeof e=="number"&&(e=I(e));;)yield e.elapsed}function*Ue(e){for(typeof e=="number"&&(e=I(e));;)yield e.elapsed<.5?0:1}const We=Math.pow,Ye=1/Math.sqrt(2*Math.PI),Ze=(e=.4)=>n=>{const s=Ye/e;let r=-2.5,a=(n-.5)/e;a*=a,r*=a;const i=s*We(Math.E,r);return i>1?1:i<0?0:i};var V={};y(V,{arch:()=>Ke,backIn:()=>vt,backInOut:()=>wt,backOut:()=>gt,bell:()=>At,bounceIn:()=>kt,bounceInOut:()=>Lt,bounceOut:()=>O,circIn:()=>pt,circInOut:()=>yt,circOut:()=>mt,cubicIn:()=>it,cubicOut:()=>ot,elasticIn:()=>bt,elasticInOut:()=>It,elasticOut:()=>Et,expoIn:()=>ut,expoInOut:()=>ht,expoOut:()=>ft,quadIn:()=>nt,quadInOut:()=>at,quadOut:()=>rt,quartIn:()=>ct,quartOut:()=>lt,quintIn:()=>He,quintInOut:()=>dt,quintOut:()=>Je,sineIn:()=>et,sineInOut:()=>st,sineOut:()=>tt,smootherstep:()=>xe,smoothstep:()=>Qe});const N=Math.sqrt,f=Math.pow,Q=Math.cos,b=Math.PI,A=Math.sin,O=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,He=e=>e*e*e*e*e,Je=e=>1-f(1-e,5),Ke=e=>e*(1-e)*4,Qe=e=>e*e*(3-2*e),xe=e=>(e*(e*6-15)+10)*e*e*e,et=e=>1-Q(e*b/2),tt=e=>A(e*b/2),nt=e=>e*e,rt=e=>1-(1-e)*(1-e),st=e=>-(Q(b*e)-1)/2,at=e=>e<.5?2*e*e:1-f(-2*e+2,2)/2,it=e=>e*e*e,ot=e=>1-f(1-e,3),ct=e=>e*e*e*e,lt=e=>1-f(1-e,4),ut=e=>e===0?0:f(2,10*e-10),ft=e=>e===1?1:1-f(2,-10*e),dt=e=>e<.5?16*e*e*e*e*e:1-f(-2*e+2,5)/2,ht=e=>e===0?0:e===1?1:e<.5?f(2,20*e-10)/2:(2-f(2,-20*e+10))/2,pt=e=>1-N(1-f(e,2)),mt=e=>N(1-f(e-1,2)),vt=e=>2.70158*e*e*e-1.70158*e*e,gt=e=>1+2.70158*f(e-1,3)+1.70158*f(e-1,2),yt=e=>e<.5?(1-N(1-f(2*e,2)))/2:(N(1-f(-2*e+2,2))+1)/2,wt=e=>{const n=2.5949095;return e<.5?f(2*e,2)*((n+1)*2*e-n)/2:(f(2*e-2,2)*((n+1)*(e*2-2)+n)+2)/2},bt=e=>{const t=2*b/3;return e===0?0:e===1?1:-f(2,10*e-10)*A((e*10-10.75)*t)},Et=e=>{const t=2*b/3;return e===0?0:e===1?1:f(2,-10*e)*A((e*10-.75)*t)+1},kt=e=>1-O(1-e),At=Ze(),It=e=>{const t=2*b/4.5;return e===0?0:e===1?1:e<.5?-(f(2,20*e-10)*A((20*e-11.125)*t))/2:f(2,-20*e+10)*A((20*e-11.125)*t)/2+1},Lt=e=>e<.5?(1-O(1-2*e))/2:(1+O(2*e-1))/2,Mt=(e=0,t=0)=>{const s={x:M(e,-1,1,0,1),y:M(e,-1,1,1,0)};let r=D(Math.abs(e),u,s);e!==0&&t>0&&(e>0?r=D(t,r,{x:0,y:s.x*2}):r=D(t,r,{x:s.y*2,y:0}));const a=Me(u,Ne,r,s),i=Oe(a);return o=>i(o)},Nt=(e,t)=>{p(P(e,"fn"));let n;return()=>(typeof n>"u"&&(n=Pe(t,{clampValue:!0})),e(n()))},Ot=(e,t)=>{p(P(e,"fn"));const n=Y(),s=W(t);if(s===void 0)throw new Error("Param 'duration' not provided");const r=Z(s,{timer:n,clampValue:!0});return H(e,r)},Pt=(e,t)=>{p(P(e,"fn"));let n;return()=>(typeof n>"u"&&(n=Te(t,{clampValue:!0})),e(n()))},Tt=(e,t)=>{p(P(e,"fn"));const n=$e(),s=Z(t,{timer:n,clampValue:!0});return H(e,s)};var $t={};y($t,{Named:()=>V,create:()=>Dt,get:()=>te,getEasingNames:()=>Bt,line:()=>Mt,tickEasing:()=>St,ticks:()=>ee,time:()=>x,timeEasing:()=>Ft});const Dt=e=>{const n=L(e.name??"quintIn")??e.fn;if(typeof n>"u")throw new Error("Either 'name' or 'fn' must be set");if("duration"in e)return x(n,e.duration);if("ticks"in e)return ee(n,e.ticks);throw new Error("Expected 'duration' or 'ticks' in options")},Ft=(e,t)=>{const n=L(e);return Ot(n,t)},x=(e,t)=>{const n=L(e);return Nt(n,t)},ee=(e,t)=>{const n=L(e);return Pt(n,t)},St=(e,t)=>{const n=L(e);return Tt(n,t)},L=e=>{const t=typeof e=="function"?e:te(e);if(typeof t>"u")throw typeof e=="string"?new Error(`Easing function not found: '${e}'`):new Error("Easing function not found");return t};let E;const te=function(e){p(pe(e,"non-empty","easingName"));const t=ne().get(e.toLowerCase());if(t===void 0)throw new Error(`Easing not found: '${e}'`);return t};function ne(){if(E===void 0){E=new Map;for(const[e,t]of Object.entries(V))E.set(e.toLowerCase(),t);return E}else return E}function*Bt(){yield*ne().keys()}const re=Object.freeze({attack:["decay","release"],decay:["sustain","release"],sustain:["release"],release:["complete"],complete:null}),k=Object.freeze({attackDuration:600,decayDuration:200,releaseDuration:800,shouldLoop:!1});var se=class extends De{#e;#s;#t;#r;#n;#a=!1;#i=!1;attackDuration;decayDuration;releaseDuration;decayDurationTotal;shouldLoop;constructor(e={}){super(),this.attackDuration=e.attackDuration??k.attackDuration,this.decayDuration=e.decayDuration??k.decayDuration,this.releaseDuration=e.releaseDuration??k.releaseDuration,this.shouldLoop=e.shouldLoop??k.shouldLoop,this.#e=new Fe(re,{initial:"attack"}),this.#e.addEventListener("change",t=>{t.newState==="release"&&this.#n&&this.#t?.reset(),super.fireEvent("change",t)}),this.#e.addEventListener("stop",t=>{super.fireEvent("complete",t)}),this.#s=()=>Y(),this.#r=this.#n=!1,this.decayDurationTotal=this.attackDuration+this.decayDuration}dispose(){this.#a||this.#e.dispose()}get isDisposed(){return this.#a}switchStateIfNeeded(e){if(this.#t===void 0)return!1;let t=this.#t.elapsed;const n=this.#n&&!this.#r;let s=!1,r=this.#e.state;do switch(s=!1,r=this.#e.state,r){case"attack":{(t>this.attackDuration||n)&&(this.#e.next(),s=!0);break}case"decay":{(t>this.decayDurationTotal||n)&&(this.#e.next(),s=!0);break}case"sustain":{(!this.#r||n)&&(t=0,this.#e.next(),this.#t.reset(),s=!0);break}case"release":{t>this.releaseDuration&&(this.#e.next(),s=!0);break}case"complete":this.shouldLoop&&e&&this.trigger(this.#n)}while(s&&r!=="complete");return s}computeRaw(e=!0,t=!0){if(this.#t===void 0)return[void 0,0,this.#e.state];e&&this.switchStateIfNeeded(t);const n=this.#e.state,s=this.#t.elapsed;let r=0;const a=this.#e.state;switch(a){case"attack":{r=s/this.attackDuration;break}case"decay":{r=(s-this.attackDuration)/this.decayDuration;break}case"sustain":{r=1;break}case"release":{r=Math.min(s/this.releaseDuration,1);break}case"complete":return["complete",1,n];default:throw new Error(`State machine in unknown state: ${a}`)}return[a,r,n]}get isDone(){return this.#e.isDone}onTrigger(){}trigger(e=!1){this.onTrigger(),this.#i=!0,this.#e.reset(),this.#t=this.#s(),this.#r=e,this.#n=e}get hasTriggered(){return this.#i}compute(){}release(){this.isDone||!this.#n||(this.#r=!1,this.compute())}};const d=Object.freeze({attackBend:-1,decayBend:-.3,releaseBend:-.3,peakLevel:1,initialLevel:0,sustainLevel:.6,releaseLevel:0,retrigger:!1});var ae=class{constructor(e){this.adsr=e}next(...e){this.adsr.hasTriggered||this.adsr.trigger();const t=this.adsr.compute();return{value:t[1],done:t[0]==="complete"}}[Symbol.toStringTag]="Generator"},z=class extends se{attackPath;decayPath;releasePath;initialLevel;peakLevel;releaseLevel;sustainLevel;attackBend;decayBend;releaseBend;initialLevelOverride;retrigger;releasedAt;constructor(e={}){super(e),this.retrigger=e.retrigger??d.retrigger,this.initialLevel=e.initialLevel??d.initialLevel,this.peakLevel=e.peakLevel??d.peakLevel,this.releaseLevel=e.releaseLevel??d.releaseLevel,this.sustainLevel=e.sustainLevel??d.sustainLevel,this.attackBend=e.attackBend??d.attackBend,this.releaseBend=e.releaseBend??d.releaseBend,this.decayBend=e.decayBend??d.decayBend;const t=1;this.attackPath=F(S({x:0,y:this.initialLevel},{x:t,y:this.peakLevel},-this.attackBend)),this.decayPath=F(S({x:0,y:this.peakLevel},{x:t,y:this.sustainLevel},-this.decayBend)),this.releasePath=F(S({x:0,y:this.sustainLevel},{x:t,y:this.releaseLevel},-this.releaseBend))}onTrigger(){if(this.initialLevelOverride=void 0,!this.retrigger){const[e,t,n]=this.compute(!0,!1);!Number.isNaN(t)&&t>0&&(this.initialLevelOverride=t)}}[Symbol.iterator](){return new ae(this)}get value(){return this.compute(!0)[1]}compute(e=!0,t=!0){const[n,s]=super.computeRaw(e,t);if(n===void 0)return[void 0,NaN,NaN];let r;switch(n){case"attack":{r=this.attackPath.interpolate(s).y,this.initialLevelOverride!==void 0&&(r=M(r,0,1,this.initialLevelOverride,1)),this.releasedAt=r;break}case"decay":{r=this.decayPath.interpolate(s).y,this.releasedAt=r;break}case"sustain":{r=this.sustainLevel,this.releasedAt=r;break}case"release":{r=this.releasePath.interpolate(s).y,this.releasedAt!==void 0&&(r=M(r,0,this.sustainLevel,0,this.releasedAt));break}case"complete":{r=this.releaseLevel,this.releasedAt=void 0;break}default:throw new Error(`Unknown state: ${n}`)}return[n,r,s]}},_t={};y(_t,{Adsr:()=>z,AdsrBase:()=>se,AdsrIterator:()=>ae,adsr:()=>Rt,adsrIterable:()=>Vt,adsrStateTransitions:()=>re,defaultAdsrOpts:()=>d,defaultAdsrTimingOpts:()=>k});const Rt=(e={})=>{const t=new z(e),n=t.releaseLevel,s=t[Symbol.iterator]();return()=>ye(s,{overrideWithLast:!0,value:n})};async function*Vt(e){const t=new z(e.env),n=e.sampleRateMs??100;t.trigger();const s=we(()=>t.value,{while:()=>!t.isDone,delay:n,signal:e.signal});for await(const r of s)yield r}var zt={};y(zt,{accelerationForce:()=>Ut,angleFromAccelerationForce:()=>ce,angleFromVelocityForce:()=>le,angularForce:()=>oe,apply:()=>Gt,attractionForce:()=>Ct,computeAccelerationToTarget:()=>ue,computeAttractionForce:()=>ie,computePositionFromAngle:()=>fe,computePositionFromVelocity:()=>q,computeVelocity:()=>j,constrainBounce:()=>qt,guard:()=>jt,magnitudeForce:()=>Wt,nullForce:()=>Yt,orientationForce:()=>xt,pendulumForce:()=>Jt,springForce:()=>Ht,targetForce:()=>Xt,velocityForce:()=>Zt});const jt=(e,t="t")=>{if(e===void 0)throw new Error(`Parameter ${t} is undefined. Expected ForceAffected`);if(e===null)throw new Error(`Parameter ${t} is null. Expected ForceAffected`);if(typeof e!="object")throw new TypeError(`Parameter ${t} is type ${typeof e}. Expected object of shape ForceAffected`)},qt=(e,t=1)=>{e||(e={width:1,height:1});const n=C(e,"left"),s=C(e,"right"),r=X(e,"top"),a=X(e,"bottom");return i=>{const o=q(i.position??u,i.velocity??u);let c=i.velocity??u,{x:l,y:m}=o;return l>s?(l=s,c=g(h(c,t),"x")):l<n&&(l=n,c=g(h(c,t),"x")),m>a?(m=a,c=h(g(c,"y"),t)):o.y<r&&(m=r,c=g(h(c,t),"y")),Object.freeze({...i,position:{x:l,y:m},velocity:c})}},Ct=(e,t,n={})=>s=>{let r=s.acceleration??u;for(const a of e){if(a===s)continue;const i=ie(a,s,t,n);r=w(r,i)}return{...s,acceleration:r}},ie=(e,t,n,s={})=>{if(e.position===void 0)throw new Error("attractor.position not set");if(t.position===void 0)throw new Error("attractee.position not set");const r=s.min??.01,a=s.max??.7,i=B(_(e.position,t.position)),o=me(T(i),r,a);return h(i,n*(e.mass??1)*(t.mass??1)/(o*o))},Xt=(e,t={})=>s=>{const r=ue(e,s.position??{x:.5,y:.5},t);return{...s,acceleration:w(s.acceleration??u,r)}},Gt=(e,...t)=>{if(e===void 0)throw new Error("t parameter is undefined");for(const a of t)a!=null&&(e=typeof a=="function"?a(e):{...e,acceleration:w(e.acceleration??u,a)});const n=j(e.acceleration??u,e.velocity??u),s=q(e.position??u,n);return{...e,position:s,velocity:n,acceleration:u}},Ut=(e,t="ignored")=>n=>Object.freeze({...n,acceleration:$(e,n,t)}),$=(e,t,n="ignored")=>{let s;switch(n){case"dampen":{s=r=>Se(e,r,r);break}case"multiply":{s=r=>U(e,r,r);break}case"ignored":{s=r=>e;break}default:throw new Error(`Unknown 'mass' parameter '${n}. Expected 'dampen', 'multiply' or 'ignored'`)}return w(t.acceleration??u,s(t.mass??1))},Wt=(e,t="ignored")=>n=>{if(n.velocity===void 0)return n;const s=T(B(n.velocity)),r=e*s*s,a=h(g(n.velocity),r);return Object.freeze({...n,acceleration:$(a,n,t)})},Yt=e=>e,Zt=(e,t)=>{const n=Ee(g,s=>h(s,e));return s=>{if(s.velocity===void 0)return s;const r=n(s.velocity);return Object.freeze({...s,acceleration:$(r,s,t)})}},oe=()=>e=>{const t=e.angularAcceleration??0,n=e.angularVelocity??0,s=e.angle??0,r=n+t,a=s+r;return Object.freeze({...e,angle:a,angularVelocity:r,angularAcceleration:0})},ce=(e=20)=>t=>{const n=t.acceleration??u;return Object.freeze({...t,angularAcceleration:n.x*e})},le=(e=1)=>t=>{const n=G(t.velocity??u);return Object.freeze({...t,angle:e<1?ve(e,t.angle??0,n):n})},Ht=(e,t=.5,n=2e-4,s=.999)=>r=>{const a=_(r.position??u,e),i=T(a),o=Math.abs(t-i),c=ke(a,B,he=>h(he,-n*o)),l=$(c,r,"dampen"),m=j(l??u,r.velocity??u),de=U(m,s,s);return{...r,velocity:de,acceleration:u}},Jt=(e,t={})=>n=>{e||(e={x:0,y:0});const s=t.length??T(e,n.position??u),r=t.speed??.001,a=t.damping??.995;let i=n.angle;i===void 0&&(n.position?i=G(e,n.position)-Math.PI/2:i=0);const o=-1*r/s*Math.sin(i),c=(n.angularVelocity??0)+o;return i+=c,Object.freeze({angularVelocity:c*a,angle:i,position:fe(s,i+Math.PI/2,e)})},j=(e,t,n)=>{const s=w(t,e);return n===void 0?s:Ae(s,n)},ue=(e,t,n={})=>{const s=n.diminishBy??.001,r=_(e,t);return n.range&&Ie(Le(r),n.range)===-2?u:h(r,s)},q=(e,t)=>w(e,t),fe=(e,t,n)=>be(e,t,n),Kt=oe(),Qt=ce(),xt=(e=.5)=>{const t=le(e);return n=>(n=Kt(n),n=Qt(n),n=t(n),n)},rn=function(e=.1,t,n,s,r){return typeof t>"u"&&(t=0),typeof n>"u"&&(n=1),typeof s>"u"&&(s=t),p(v(e,"bipolar","interval"),v(n,"bipolar","end"),v(s,"bipolar","offset"),v(t,"bipolar","start")),en(e,t,n,s,r)},en=function*(e,t,n,s,r){if(t===void 0)throw new Error("Parameter 'lower' is undefined");if(e===void 0)throw new Error("Parameter 'interval' is undefined");if(n===void 0)throw new Error("Parameter 'upper' is undefined");if(r===void 0&&e<=1&&e>=0?r=10/e:typeof r>"u"&&(r=1234),Number.isNaN(e))throw new Error("interval parameter is NaN");if(Number.isNaN(t))throw new Error("lower parameter is NaN");if(Number.isNaN(n))throw new Error("upper parameter is NaN");if(Number.isNaN(s))throw new Error("upper parameter is NaN");if(t>=n)throw new Error("lower must be less than upper");if(e===0)throw new Error("Interval cannot be zero");const a=n-t;if(Math.abs(e)>=a)throw new Error(`Interval should be between -${a} and ${a}`);let i=e>0;if(n=Math.floor(n*r),t=Math.floor(t*r),e=Math.floor(Math.abs(e*r)),e===0)throw new Error(`Interval is zero (rounding: ${r})`);if(s=s===void 0?t:Math.floor(s*r),s>n||s<t)throw new Error(`Start (${s/r}) must be within lower (${t/r}) and upper (${n/r})`);let o=s;yield o/r;let c=!0;for(;;)o=o+(i?e:-e),i&&o>=n?(i=!1,o=n,o===n&&c&&(o=t,i=!0)):!i&&o<=t&&(i=!0,o=t,o===t&&c&&(o=n,i=!1)),yield o/r,c=!1};export{_t as e,rn as p};
